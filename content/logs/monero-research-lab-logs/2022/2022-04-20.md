---
title: "Журнал встречи Исследовательской лаборатории Monero от 20.04.2022"
date: "2022-04-20"
categories:
  - "Журнал встречи"
tags:
  - "Журнал встречи"
---

## _Журнал встречи:_

_**\<UkoeHB>**_ время встречи https://github.com/monero-project/meta/issues/691  
_**\<UkoeHB>**_ 1. приветствия  
_**\<UkoeHB>**_ привет!  
_**\<xmr-ack[m]>**_ hi  
_**\<jberman[m]>**_ howdy  
_**\<rbrunner>**_ Hello  
_**\<Rucknium[m]>**_ Hi  
_**\<mj-xmr[m]>**_ o/  
_**\<cryptogrampy[m]>**_ hi  
_**\<UkoeHB>**_ 2. обновления, над чем работаете?  
_**\<mj-xmr[m]>**_ По запросу @Rucknium и @jberman я документирую алгоритм выбора приманок и механизмов гамма-распределения. Мой подход заключается в создании изолированных модульных тестов, где каждый тест делает шаг вперед по тропинке решений, проверяя все возможные варианты, а также пытается найти «счастливый» или самый короткий путь. Каждый тест... полный текст сообщения доступен по ссылке: https://libera.ems.host/_matrix/media/r0/download/libera.chat/4c43742938f528ae8feb99fcb2baa41fd560b3ee)  
_**\<mj-xmr[m]>**_ `/стена текста` :D  
_**\<UkoeHB>**_ У меня, как и всегда, непрерывные работы над Seraphis. Сегодня-завтра у меня должны быть эталонные модульные тесты для группированных наборов (расположение контейнеров определяется вручную). Я думаю, что лучше позволить выбор местоположения самому кошельку, скорее, из-за сложности в специфике, но и не стоит забывать про гибкость/постоянство улучшений вне графика хардфорка  
_**\<Rucknium[m]>**_ Я занимаюсь сбором информации о дискретизации комиссий и настройкой приложения reeemuru `analitiko` на VPS сервере по адресу https://analitiko.app/  
_**\<UkoeHB>**_ Кстати, PR c тегом просмотра был объединен, ура :)! Сегодня я буду перебазировать PR 8149 c мультиподписью.  
_**\<UkoeHB>**_ 3. хорошо, давайте поговорим о дискретизации комиссий  
_**\<jberman[m]>**_ у меня в основном обзор/обновление моих собственных PR. Я также немного покопался в трансляции транзакций Dandelion++ и обнаружил, что не было никакой утечки информации. Напомню, что я подозревал, что может быть утечка некоторой информации при повторной отправке транзакции на узел  
_**\<UkoeHB>**_ Основная идея дискретизации комиссий заключается в том, чтобы установить ограниченное количество значений для комиссий на основе консенсуса. Преимущество будет заключаться в смягчении платного анализа транзакций (снятие дактилоскопии кошелька, анализ поведения пользователей, время создания транзакций, что очень важно для мультиподписей), а также экономии нескольких байтов за счет использования более компактного представления. Есть несколько идей по его реализации:  
_**\<UkoeHB>**_ 1) указать однозначную цифру в значении комиссии; 2) использовать степени некоторого множителя (например, 1,2, 1,5, 2); 3) использовать степени некоторого множителя, округленные до однозначной цифры.  
_**\<Rucknium[m]>**_ Мое мнение о дискретизации комиссий: как уже говорилось, высокоточные сборы могут представлять риск для конфиденциальности из-за отпечатков поведения. Есть две проблемы, которые могут стать основным недостатком дискретизации сборов:  
_**\<Rucknium[m]>**_ 1) Дискретные скачки, которые высоки в процентном выражении, и плохо спроектированный оценщик комиссий может интерпретировать переход от 1 единицы к 2 единицам комиссии (т.е. удвоение комиссионных) как сигнал к агрессивному перебиванию ставок конкурентов. Затем возникает эффект снежного кома и пузырь комиссий, который будет раздражать пользователей.  
_**\<Rucknium[m]>**_ 2) Дискретизация комиссий может усложнить другие попытки повысить единообразность транзакций за счет реализации некоторых идей по сглаживанию комиссий, например, из механизма комиссий Ethereum EIP-1559.  
_**\<UkoeHB>**_ можете подвести итоги по сглаживанию комиссий?  
_**\<Rucknium[m]>**_ я думаю, что преимущества конфиденциальности перевешивают обе эти проблемы, поэтому мы должны остановиться именно на дискретных сборах  
_**\<kayabanerve[m]>**_ Не говоря уже о том, что вы можете искусственно повысить степень комиссии и подождать, чтобы увидеть, сколько времени потребуется транзакции на включение в блок, верно? С другой стороны, меньшая точность увеличивает последствие плохих реализаций, что облегчает обнаружение транзакций в цепочках  
_**\<kayabanerve[m]>**_ насколько это опасно?  
_**\<Rucknium[m]>**_ Я не эксперт по EIP-1559, но, насколько я понимаю, механизм комиссий делает комиссию за газ ETH более предсказуемой. Это снижает различные уровни комиссий. Мы также должны думать не только о самих комиссиях, но и о том, какой алгоритм оценки комиссий произвел комиссию — если метод оценки комиссий может быть реконструирован на основе данных блокчейна или статуса мемпула, то это может создать подобие анонимной лужи  
_**\<Rucknium[m]>**_ Таким образом, если нет необходимости оценивать комиссионные сборы — т. е. правила консенсуса дают оптимальную комиссию — тогда у алгоритмов оценки комиссий меньше возможностей для утечки чувствительной информации  
_**\<UkoeHB>**_ Даже при дискретных сборах возможен некоторый анализ. Надеюсь, вместо луж у нас будут диаграммы Венна, где неясно, на какую именно лужу вы смотрите  
_**\<rbrunner>**_ Я немного смущен, говоря об этих "оценках". Мы всегда думали, что комиссии Monero просто рассчитываются, разве нет?  
_**\<rbrunner>**_ С высокой точностью или, может быть, более дискретными шагами в будущем, но по формуле?  
_**\<UkoeHB>**_ оценщик комиссии = оценка того, какая комиссия вам нужна, чтобы отправить вашу транзакцию в цепочку в течение «2 минут, 10 минут, 1 часа и т. д.»  
_**\<rbrunner>**_ Так что, это все еще довольно теоретически для Monero, по крайней мере, на данный момент?  
_**\<UkoeHB>**_ kayabanerve[m]: Я думаю, это будет зависеть от реализации...  
_**\<UkoeHB>**_ rbrunner: верно  
_**\<gingeropolous>**_ комиссия зависит от размера (веса) транзакции. Относится ли проблема способности отпечатков к тому, когда именно была отправлена транзакция?  
_**\<kayabanerve[m]>**_ Теоретически мы могли бы перенести оценщик комиссии в wallet2 и таким образом уменьшить разницу  
_**\<UkoeHB>**_ gingeropolous: только за минимальную плату, вы можете выбрать любое значение комиссии (что в основном и делают люди)  
_**\<gingeropolous>**_ верно-верно  
_**\<Rucknium[m]>**_ rbrunner: На мой взгляд, это самая сложная часть: у вас может быть все, как у всех. Транзакции включаются в блок на основании аукциона и первой цены (при условии, что майнеры рациональны). Но люди могут делать ставки на что угодно, что приводит к проблемам с конфиденциальностью. Или мы могли бы внедрить конкретную формулу оплаты в консенсус, но это приведет к побочным последствиям для майнеров и пользователей, что наносит еще больший ущерб конфиденциальности, как отметил ArticMine  
_**\<Rucknium[m]>**_ неделю или две тому назад  
_**\<UkoeHB>**_ kayabanerve[m]: да, в wallet2 уже есть оценщик комиссий, поэтому большинство транзакций попадают в один большой пул  
_**\<kayabanerve[m]>**_ UkoeHB: ^ . Атака на лужи будет выглядеть примерно так: комиссия равна 1, как и должно быть, но кто-то отправляет несколько с комиссией 2. Другая половина кошельков начинают использовать 3, и получается, что комиссия увеличилась на 100%! Срабатывает триггер - Мы под нагрузкой! Используйте еще более высокую плату! Затем другая половина вменяемых кошельков говорит, что можно использовать 1. В течение следующих нескольких минут вы можете воочию лицезреть подобие отпечатков на лужах.  
_**\<UkoeHB>**_ оценщик комиссии просто смотрит на ваш приоритет транзакции, вот и все (более продвинутый оценщик может предлагать произвольные суммы)  
_**\<Rucknium[m]>**_ Поддержание аукциона первой цены предполагает, что в какой-то момент Monero будет иметь комиссионный рынок (периодический или постоянный). Если бы мы не думали, что у Monero когда-либо будет рынок комиссий, то нам было бы лучше внедрить формулу комиссий именно в консенсус  
_**\<kayabanerve[m]>**_ UkoeHB: Рад слышать  
_**\<rbrunner>**_ Таким образом, основная идея дискретизации состоит в том, чтобы предоставить людям свободу выбора комиссий?  
_**\<Rucknium[m]>**_ Обратите внимание, что sech1 сказал: «Нет, кошелек автоматически увеличивает комиссию, когда мемпул заполнен».  
_**\<rbrunner>**_ Да, я думаю, что кошелек использует следующий, более высокий множитель  
_**\<UkoeHB>**_ kayabanerve[m]: да, это был бы один вектор для пуддинга. На практике любая реализация, которая сейчас не является копией wallet2, будет создавать подобие отпечатков, поскольку степень детализации очень высока. При более низкой детализации было бы намного больше совпадений между различными оценками комиссий  
_**\<kayabanerve[m]>**_ UkoeHB: я хотел бы обсудить комментарий ruckniums  
_**\<kayabanerve[m]>**_ Не то чтобы это не было ценным или справедливым теоретическим замечанием. Исключительно то, что большинство кошельков будут считать комиссии без каких-либо проблем, а пограничные случаи уже являются крайней мерой  
_**\<UkoeHB>**_ Что насчёт снежного кома?  
_**\<kayabanerve[m]>**_ Дальнейшее обсуждение «снежного кома» и последствий для конфиденциальности  
_**\<UkoeHB>**_ Вы предполагаете, что конфиденциальность будет значительно хуже с дискретизированными сборами?  
_**\<kayabanerve[m]>**_ Я не говорю, что мы не должны проверять код перед, я говорю, что если мы сделаем это правильно, экосистема не должна пострадать  
_**\<kayabanerve[m]>**_ UkoeHB: Атаки пуддинга неприменимы при использовании идентичного алгоритма, поэтому нет, я отказываюсь от этого предложения. И да, я изначально предполагал, что у него будут недостатки.  
_**\<UkoeHB>**_ Что именно вы предлагаете?  
_**\<Rucknium[m]>**_ чтобы избежать "снежного кома" или "пузыря" комиссии, будет достаточно иметь достойную оценку комиссии в `wallet2`? Снежный ком или пузырь, вероятно, возникнут только в том случае, если подавляющее большинство кошельков неправильно интерпретируют повышение комиссии на короткой дистанции и получится каскадный эффект  
_**\<kayabanerve[m]>**_ Я уже указывал на неоднородные, низкокачественные алгоритмы, которые можно идентифицировать как преднамеренно запущенный алгоритм снежного кома  
_**\<kayabanerve[m]>**_ Rucknium[m]: И пока у меня нет другого довода  
_**\<Rucknium[m]>**_ Кстати, если кому-то интересен анализ EIP-1559 Ethereum, см.: https://arxiv.org/abs/2012.00854  
_**\<UkoeHB>**_ Rucknium[m]: существует некая рекурсивная дилемма с оценщиками - если оценщики постоянно завышают комиссию, то пользователи просто выберут более низкие комиссии вручную или переключатся на кошелек, который работает лучше  
_**\<mj-xmr[m]>**_ kayabanerve[m]: Это можно "упорядочить"  
_**\<mj-xmr[m]>**_ Я имею в виду, что оценщик может иметь логарифмическую защиту максимальной величины комиссии  
_**\<Rucknium[m]>**_ UkoeHB: Теоретически да. При ограниченной рациональности и удовлетворительном поведении пользователи могут мириться с плохими алгоритмами оценки. У bitcoin, по-видимому, есть алгоритм, который систематически завышает комиссии, и огромное количество людей до сих пор используют его  
_**\<kayabanerve[m]>**_ Угу, так что пока мы разрабатываем оптимальный алгоритм в wallet2, который затем естественным образом принимает вся остальная экосистема... :)  
_**\<UkoeHB>**_ kayabanerve[m]: Я не уверен, что дискретные сборы будут иметь большую проблему из-за инициированных инкрементов алгоритма, чем недискретизированные сборы. Ваш триггер просто должен знать, какие условия необходимы для получения статистически значимого ответа от исследуемого алгоритма  
_**\<kayabanerve[m]>**_ UkoeHB: меня интересовал тот факт, что небольшое целое число будет округлено, а из-за значительных изменений на каждом этапе обычные эффекты сетевой задержки на комиссию могут вызвать несколько различных вариации, что повлечёт естественное отклонение  
_**\<kayabanerve[m]>**_ Это был мой теоретический мыслительный процесс, который я на 100% не успел реализовать и не просмотрел текущую политику комиссий, прежде чем захотеть поднять текущее обсуждение в массы. Я знаю, что уже есть маска для комиссий, которая в некоторой степени справляется с этим.  
_**\<UkoeHB>**_ В заключение... кто-нибудь думает "пожалуйста, не делайте этого"?  
_**\<rbrunner>**_ Мне кажется, что продвижение по шагам может быть хорошей идеей. Начните с малого, т.е. с усложнения оценок времени построения транзакций за счет дискретизации  
_**\<rbrunner>**_ и оставьте разборы с оценщиками комиссий и снежные комы на потом  
_**\<UkoeHB>**_ rbrunner: небольшое примечание: https://github.com/monero-project/monero/pull/7819  
_**\<UkoeHB>**_ rbrunner: Кроме того, я ориентируюсь на показатели дискретных комиссий в seraphis  
_**\<rbrunner>**_ Хммм.. как-то пропустил...  
_**\<Rucknium[m]>**_ Я сказал это перед началом собрания, но я также занесу это в протокол собрания - я хочу и могу исследовать алгоритм оценки вознаграждения, который обрабатывает дискретные платежи, минимизирует риски конфиденциальности и снижает вероятность вознаграждения. Не сейчас, но в будущем, когда мы приблизимся к реализации Seraphis в основной сети.  
_**\<merope>**_ Я думаю, что динамический размер блока может также смягчить удар в отношении любых положительных циклов обратной связи между уровнями комиссий  
_**\<merope>**_ Поскольку размер блока не является фиксированным, поддержание постоянного значения комиссии приведет к увеличению размера блока, что, в свою очередь, снизит аналогичное значение для всех новых транзакций и увеличит общую стоимость поддержания этого значения  
_**\<UkoeHB>**_ Rucknium[m]: Я думаю, что это действительно ценный долгосрочный проект, поэтому я с нетерпением жду его :)  
_**\<Rucknium[m]>**_ динамический размер блока хорош для долгосрочной стабильности комиссий, но он все равно будет подвержен временным краткосрочным всплескам транзакций  
_**\<jberman[m]>**_ <kayabanerve[m]> "Я думаю, что динамический размер блока может также смягчить удар ..." <- Если один кошелек использует другой алгоритм комиссий, нежели другой, или вы пытаетесь идентифицировать конкретную транзакцию в определенный момент времени, да, комиссии, безусловно, могут привести к утечке данных  
_**\<gingeropolous>**_ ^  
_**\<UkoeHB>**_ У кого-нибудь есть мнение о том, каким должен быть хороший коэффициент масштабирования? Мне очень нравятся полуторные значения, которые округлены до одного знака  
_**\<Rucknium[m]>**_ UkoeHB: Если вы реализуете этот код сейчас, а затем каким-то образом мы поймем, что это была плохая идея (прежде чем она попадет в основную сеть), насколько сложно будет отменить ее в рабочей реализации?  
_**\<UkoeHB>**_ Rucknium[m]: не так уж сложно  
_**\<merope>**_ Я думаю, что коэффициент масштабирования следует оценивать с точки зрения значения, которое он оказывает на увеличение размера блока. т.е.: «Если мы перейдем на следующий уровень комиссии, сколько еще транзакций мы сможем поместить в блок? Насколько быстрее будут расти блоки?»  
_**\<merope>**_ Если степень детализации слишком мала, то пользователю/кошельку, возможно, придется пропустить несколько уровней за раз, чтобы оправдать включение транзакции в следующий блок  
_**\<merope>**_ Правда, если степень детализации слишком грубая, рост размера блока может стать нестабильным.  
_**\<mj-xmr[m]>**_ Я так, просто на поглазеть к вам  
_**\<gingeropolous[m]>**_ :)  
_**\<UkoeHB>**_ merope: похоже у тебя появилась новая домашняя работа :)  
_**\<merope>**_ Пожалуйста, одно CCS предложение за раз 😅  
_**\<merope>**_ Я не знаю, как это смоделировать, но интуиция подсказывает мне, что это, скорее, проблема в теории управления  
_**\<mj-xmr[m]>**_ Звучит интригующе (я инженер по управлению)  
_**\<merope>**_ (но, может быть, это уже очевидно для вас)  
_**\<UkoeHB>**_ может быть, стоит отдать это домашнее задание mj-xmr[m]?  
_**\<Rucknium[m]>**_ Это не просто проблема теории управления. К сожалению, люди не атомы ;)  
_**\<mj-xmr[m]>**_ UkoeHB: Если кто-то посвятит меня в тонкости работы оценщиков, с радостью займусь этой работой  
_**\<mj-xmr[m]>**_ Rucknium[m]: Теория дискретного управления. Так лучше?  
_**\<Rucknium[m]>**_ Там присутствуют элементы теории управления  
_**\<UkoeHB>**_ Хорошо, мы уже приближаемся к часовой отметке. Спасибо всем за участие  
_**\<UkoeHB>**_ Значит на данный момент я реализую round(pows(1.5)) в качестве временного решения, чтобы я мог сдвинуться в плане прогресса в своем PoC  

---
  
_Источник: [Monero Research Lab Meeting - Wed 13 April 2022 @ 17:00 UTC #688](https://github.com/monero-project/meta/issues/688)_

_Перевод: [Mr. Pickles](https://t.me/v1docq47)_  
_Коррекция: [Kukima](https://t.me/Kukima)_
