---
title: "CT-004: Шифрование посредством GPG"
date: "2022-11-07"
categories:
  - "Статьи"
  - "Cypherpunk Transmission"
tags:
  - "Cypherpunk Transmission"
thumbnail: "img/copyright/cypherpunk-transmission/ct-004.png"
lead: "Это четвёртый отчёт из новой серии 'Cypherpunk Transmission'"
pager: true
toc: true
sidebar: "right"
---

## _Мотивация_

Едва ли кто-то станет обеспечивать приватность наших данных исключительно из благих побуждений. И не следует доверять какой-то сторонней инфраструктуре и сервисам, по умолчанию предлагающим услуги шифрования. Всё это следует делать самостоятельно. Вручную и локально.

Использование таких механизмов, как TLS, и паролей, позволяет лишь частично защитить то, что содержится в наших сообщениях. При этом в соответствии со многими моделями угроз к шифрованию стоит прибегать не только для защиты действительно секретных данных.

Несмотря на всё своё несовершенство, GPG по-прежнему остаётся довольно хорошим, актуальным и относительно простым в использовании инструментом шифрования, и прочитав это руководство, вы узнаете, как пользоваться им.

## _Предварительные условия_

- Наличие установленной программы gnupg.
- Наличие пары ключей.
- Базовый опыт работы с консолью.

## 1. _Обмен ключами_

Попрактикуемся, скомпилировав на базе исходного кода официальный CLI-кошелёк Monero.

### 1.1 _Экспорт публичного ключа_

Откройте консоль и укажите свои свои секретные ключи:

```
gpg -K
```

На выходе должен быть хотя бы один блок, содержащий следующее:

```
sec	rsa4096 2022-11-01 [SC]
	BCE15F74D18112824899608AFD103120DC7BCC36
uid		[ultimate] escapethe3ra@dnmx.org
ssb	rsa4096 2022-11-01 [E]
```

Строка под sec должна содержать идентификационную метку вашего ключа.

Теперь вы можете экспортировать ваш публичный ключ в формате .asc (в кодировке ascii):

```
gpg --export -a BCE15F74D18112824899608AFD103120DC7BCC36 > escapethe3ra@dnmx.org
```

_Примечание: замените идентификационную метку ключа и имя файла на соответствующие_.

### 1.2 _Передача публичного ключа_

После ввода предыдущей команды создаётся файл, начинающийся с `--BEGIN PGP PUBLIC KEY BLOCK--` и заканчивающийся `--END PGP PUBLIC KEY BLOCK--`. Этим файлом можно делиться с кем угодно.

Свой публичный ключ можно сделать общедоступным, загрузив на свой сайт. Также рекомендуется опубликовать идентификационную метку ключа.


### 1.3 _Получение публичного ключа другой стороны_

Чтобы начать обмен данными, необходимо зашифровать свои сообщения с помощью публичного ключа другой стороны.

Если у вас его нет — ничего страшного. Я с удовольствием сыграю эту роль.

Для начала скачайте файл с моим публичным ключом:

```
wget https://monero.observer/3RA_pubkey.asc
```

Если идентификационная метка ключа соответствует `BCE15F74D18112824899608AFD103120DC7BCC36`, импортируйте его:

```
gpg --show-keys 3RA_pubkey.asc
gpg --import 3RA_pubkey.asc
```

_Примечание: если идентификационная метка не совпадает, не импортируйте ключ. Удалите файл и попробуйте загрузить его снова_.

## 2. _Отправка зашифрованных сообщений_

### 2.1 _Написание сообщения_

Напишите простое сообщение и сохраните его в `msg-1.txt`:

```
echo "Hello 3RA! GPG is easy :)" > msg-1.txt
```

### 2.2 _Шифровка и отправка сообщения_

Теперь зашифруем и подпишем сообщение:

```
gpg --encrypt --sign --armor --recipient BCE15F74D18112824899608AFD103120DC7BCC36 msg-1.txt
```

Получаем файл `msg-1.txt.asc`, который выглядит следующим образом:

```
-----BEGIN PGP MESSAGE-----
[..]
-----END PGP MESSAGE-----
```

Отправьте мне это сообщение по любому каналу, указанному в моём файле `contact-signed.txt4` (лучше всего по электронной почте или посредством XMPP).

_Примечание: если хотите получить зашифрованный ответ, не забудьте указать свой публичный ключ_.

## 3. _Расшифровка сообщений_

Для расшифровки файлов необходимо ввести:

```
gpg file_name_encrypted
```

Введите `N` и укажите новое имя файла, если не хотите перезаписывать исходное.

Как вариант можно ввести `gpg --decrypt file_name_encrypted > file_name_decrypted` и пропустить все подсказки.

## _Примечания_

- Любой тип файла может быть зашифрован и расшифрован (pdf, изображения, аудио, видео, текст). Не пользуйтесь возможно вредоносными, а только проверенными.
- Шифрование посредством GPG позволяет скрыть только содержимое файлов, но не мета-данные, размер самого сообщения, отправителя и получателя.
- Секретный ключ должен быть защищён надёжной фразой-паролем, и его никогда и никому не следует раскрывать.
- Свои ответы другой стороне всегда надлежит шифровать и не раскрывать её сообщения в обычном виде, то есть, обычным текстом.

Вот и всё, что нужно знать об обмене данными посредством GPG. Если вам понадобится помощь, вы знаете, как и где со мной связаться.

---

## _Обратная связь_

Если эта статья показалась вам полезной, заинтересовала вас, дайте мне знать, и я сделаю всё возможное, чтобы публиковать подобные отчёты [Cypherpunk Transmission](https://monero.observer/tag/CT/) каждый (второй?) понедельник.

Вопросы, правки и предложения приветствуются.

Благодарю gnuteardrops из [monero.graphics](https://monero.graphics/) за потрясающую графику xkcd. Работа и шрифт xkcd лицензированы в соответствии с [CC BY-NC 3.0](https://github.com/ipython/xkcd-font/blob/master/LICENSE).

---

_Источник: [CT-004: GPG encrypted communication](https://monero.observer/cypherpunk-transmission-004-gpg-encrypted-communication/)_

_Перевод: [Mr. Pickles](https://t.me/v1docq47)_  
_Коррекция: [Kukima](https://t.me/Kukima)_
